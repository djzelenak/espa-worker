# File: user-group.yml
# Description: Set up espa user
# Last Updated: See 'git log -p <filename>'
# Recent Changes: See 'git log -p <filename>'

- name: user-group|Add ie group
  group:
    name: "{{ app_group }}"
    gid: "{{ app_gid }}"
    state: present

- name: user-group|Add espa user
  user:
    name: "{{ app_user }}"
    uid: "{{ app_uid }}"
    group: "{{ app_group }}"

- name: user-group|Add espatst group
  group:
    name: "{{ apt_group }}"
    gid: "{{ apt_gid }}"
    state: present

- name: user-group|Add espatst user
  user:
    name: "{{ apt_user }}"
    uid: "{{ apt_uid }}"
    group: "{{ apt_group }}"

- name: user-group|Add espadev group
  group:
    name: "{{ apd_group }}"
    gid: "{{ apd_gid }}"
    state: present

- name: user-group|Add espadev user
  user:
    name: "{{ apd_user }}"
    uid: "{{ apd_uid }}"
    group: "{{ apd_group }}"

- name: install sudo
  yum:
    name: sudo
    state: installed

- name: sudo without password for ie group
  copy:
    content: '%ie ALL=(ALL:ALL) NOPASSWD:ALL'
    dest: /etc/sudoers.d/ie_nopasswd
    mode: 0440